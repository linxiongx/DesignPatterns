# C++ 备忘录模式详解

> 备忘录模式（Memento Pattern）是一种行为型设计模式，用于在不破坏封装性的前提下，捕获并保存对象的内部状态，以便日后可以将对象恢复到之前的状态。

## 核心组成部分

备忘录模式包含三个核心角色：

**发起人（Originator）**：需要保存状态的对象，它创建备忘录来记录当前状态，也可以使用备忘录恢复状态。

**备忘录（Memento）**：存储发起人对象的内部状态，可以防止发起人以外的对象访问备忘录。

**管理者（Caretaker）**：负责保管备忘录，但不能对备忘录的内容进行操作或检查。



## 优缺点分析

**优点：**

- 提供了状态恢复机制，实现撤销/重做功能
- 保持了封装性，备忘录对象对外不可见
- 简化了发起人类，状态管理交由管理者负责

**缺点：**

- 如果状态信息很大，会消耗较多内存
- 频繁创建备忘录会影响性能
- 需要维护备忘录的生命周期

## 适用场景

​    备忘录模式特别适合需要保存和恢复对象状态的场景，包括文本编辑器的撤销重做、游戏存档系统、数据库事务回滚、配置管理的版本控制等。这种模式在需要提供撤销功能的应用中非常实用。